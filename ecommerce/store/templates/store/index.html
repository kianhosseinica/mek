{% extends 'store/base.html' %}
{% load static %}

{% block extra_head %}
    <style>
    /* Force all product-item cards to the same fixed height */
    .product-item {
      height: 360px !important;
      display: flex !important;
      flex-direction: column !important;
      justify-content: flex-start !important;
    }
    /* Uniform spacing inside cards */
    .product-item figure,
    .product-item h3,
    .product-item .qty,
    .product-item .rating {
      margin-bottom: 0.75rem !important;
    }
  </style>

{% endblock %}

{% block content %}
  <!-- Hero Banners -->
  <section class="py-3" style="background-image: url('{% static 'images/background-pattern.jpg' %}'); background-repeat: no-repeat; background-size: cover;">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12">
          <div class="banner-blocks">
  <!-- Slide 1 -->
  <div class="banner-ad large bg-info block-1">
    <div class="swiper main-swiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          <div class="row banner-content p-5">
            <div class="content-wrapper col-md-7">
              <div class="categories my-3">Top Quality</div>
              <h3 class="display-4">PVC Pipes & Fittings Sale</h3>
              <p>Discover durable and reliable piping solutions for residential and commercial plumbing projects.</p>
              <a href="#" class="btn btn-outline-dark btn-lg text-uppercase fs-6 rounded-1 px-4 py-3 mt-3">Shop Now</a>
            </div>
            <div class="img-wrapper col-md-5">
              <img src="#" alt="PVC Pipes Banner" class="img-fluid">
            </div>
          </div>
        </div>

        <!-- Slide 2 -->
        <div class="swiper-slide">
          <div class="row banner-content p-5">
            <div class="content-wrapper col-md-7">
              <div class="categories mb-3 pb-3">New Arrivals</div>
              <h3 class="banner-title">Water Heaters & Accessories</h3>
              <p>Upgrade your plumbing system with our latest range of efficient water heaters and parts.</p>
              <a href="#" class="btn btn-outline-dark btn-lg text-uppercase fs-6 rounded-1">Shop Collection</a>
            </div>
            <div class="img-wrapper col-md-5">
              <img src="#" alt="Water Heater Banner" class="img-fluid">
            </div>
          </div>
        </div>

        <!-- Slide 3 -->
        <div class="swiper-slide">
          <div class="row banner-content p-5">
            <div class="content-wrapper col-md-7">
              <div class="categories mb-3 pb-3">Trusted Brands</div>
              <h3 class="banner-title">Top-Quality Valves & Fixtures</h3>
              <p>Choose from a wide selection of valves, taps, and bathroom fixtures from leading brands.</p>
              <a href="#" class="btn btn-outline-dark btn-lg text-uppercase fs-6 rounded-1">Shop Collection</a>
            </div>
            <div class="img-wrapper col-md-5">
              <img src="#" alt="Valves and Fixtures Banner" class="img-fluid">
            </div>
          </div>
        </div>

      </div>
      <div class="swiper-pagination"></div>
    </div>
  </div>

  <!-- Side Banner A -->
<div class="banner-ad block-2" style="background-color: lightgreen;">
  <div class="row banner-content p-5 d-flex align-items-center justify-content-center">
    <div class="content-wrapper col-md-7 text-center">
      <img src="{% static 'images/single-image.png' %}" alt="Drainage Solutions" style="max-width: 100%; height: auto;">
      <div class="categories sale my-3">20% Off</div>
      <h3 class="banner-title">Drainage Solutions</h3>
      <a href="#" class="d-flex align-items-center justify-content-center nav-link">Shop Collection 
        <svg width="24" height="24"><use xlink:href="#arrow-right"></use></svg>
      </a>
    </div>
  </div>
</div>


  <!-- Side Banner B -->
<div class="banner-ad block-3" style="background-color: lightpink;">
  <div class="row banner-content p-5 d-flex align-items-center justify-content-center">
    <div class="content-wrapper col-md-7 text-center">
      <img src="{% static 'images/single-image-2.png' %}" alt="Plumbing Tools & Accessories" style="max-width: 100%; height: auto;">
      <div class="categories sale my-3">15% Off</div>
      <h3 class="item-title">Plumbing Tools & Accessories</h3>
      <a href="#" class="d-flex align-items-center justify-content-center nav-link">
        Shop Collection 
        <svg width="24" height="24"><use xlink:href="#arrow-right"></use></svg>
      </a>
    </div>
  </div>
</div>


</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Categories -->
<section class="py-5 overflow-hidden">
  <div class="container-fluid">
    <div class="section-header d-flex flex-wrap justify-content-between mb-5">
      <h2 class="section-title">Category</h2>
      <div class="d-flex align-items-center">
        <a href="{% url 'store:category-index' %}" class="btn-link text-decoration-none">View All Categories →</a>
        <div class="swiper-buttons ms-3">
          <button class="swiper-prev category-carousel-prev btn btn-yellow me-1">❮</button>
          <button class="swiper-next category-carousel-next btn btn-yellow">❯</button>
        </div>
      </div>
    </div>

    <!-- FORCE horizontal scroll on mobile, normal swiper on desktop -->
    <div class="category-carousel swiper" style="padding: 0 10px; overflow-x: auto !important;">
      <div class="swiper-wrapper"
           style="display: flex !important; flex-wrap: nowrap !important; gap: 10px !important;">

        {% for category in categories %}
          <a href="{% url 'store:category-index' %}" 
             class="nav-link category-item swiper-slide"
             style="flex: 0 0 auto !important; width: 180px !important; height: 280px !important; display: flex !important; flex-direction: column !important; align-items: center !important; justify-content: flex-start !important; text-align: center !important; background: #fff !important; box-shadow: 0 0 5px rgba(0,0,0,0.05) !important; border-radius: 8px !important; overflow: hidden !important;">

            {% if category.image %}
              <img src="{{ category.image.url }}" alt="{{ category.name }}"
                   style="width: 100% !important; height: auto !important; max-width: 190px !important; max-height: 190px !important; object-fit: cover !important; display: block !important;">
            {% else %}
              <img src="{% static 'images/default-category.png' %}" alt="{{ category.name }}"
                   style="width: 100% !important; height: auto !important; max-width: 190px !important; max-height: 190px !important; object-fit: cover !important; display: block !important;">
            {% endif %}

            <h3 class="category-title"
                style="margin-top: 10px; min-height: 40px !important; display: flex !important; align-items: center !important; justify-content: center !important; text-align: center !important; font-size: 1rem !important; padding: 0 10px;">
              {{ category.name }}
            </h3>

          </a>
        {% endfor %}
      </div>
    </div>
  </div>
</section>






  <!-- Brands -->
  <section class="py-5 overflow-hidden">
    <div class="container-fluid">
      <div class="section-header d-flex flex-wrap justify-content-between mb-5">
        <h2 class="section-title">Newly Arrived Brands</h2>
        <div class="d-flex align-items-center">
          <a href="{% url 'store:shop' %}" class="btn-link text-decoration-none">View All Categories →</a>
          <div class="swiper-buttons">
            <button class="swiper-prev brand-carousel-prev btn btn-yellow">❮</button>
            <button class="swiper-next brand-carousel-next btn btn-yellow">❯</button>
          </div>
        </div>
      </div>
      <div class="brand-carousel swiper">
        <div class="swiper-wrapper">
          {% for brand in brands %}
            <div class="swiper-slide">
              <div class="card mb-3 p-3 rounded-4 shadow border-0">
                <div class="row g-0">
                  <div class="col-md-4">
                    {% if brand.image %}
                      <img src="{{ brand.image.url }}" class="img-fluid rounded" alt="{{ brand.name }}">
                    {% else %}
                      <img src="{% static 'images/default-brand.png' %}" class="img-fluid rounded" alt="{{ brand.name }}">
                    {% endif %}
                  </div>
                  <div class="col-md-8">
                    <div class="card-body py-0">
                      <p class="text-muted mb-0">{{ brand.name }}</p>
                      <h5 class="card-title">High-quality products from {{ brand.name }}</h5>
                      {% if brand.is_new %}
                        <span class="new-badge">New!</span>
                      {% endif %}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </section>

  <!-- Trending Products -->
  <section class="py-5">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12">
          <div class="bootstrap-tabs product-tabs">
            <div class="tabs-header d-flex justify-content-between border-bottom my-5">
              <h3>Trending Products</h3>
            </div>
            <div class="tab-content" id="nav-tabContent">
              <div class="tab-pane fade show active" id="nav-trending" role="tabpanel">
                <div class="product-grid row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5">
                  {% for product in trending_products %}
                    <div class="col">
                      <div class="product-item">
                        {% if product.discount_price %}
                          <span class="badge bg-success position-absolute m-3">-{{ product.discount_percentage }}%</span>
                        {% endif %}
                        <a href="{% url 'users:add_to_wishlist' product.id %}" class="btn-wishlist">
                          <svg width="24" height="24"><use xlink:href="#heart"></use></svg>
                        </a>
                        <figure>
                            <a href="{% url 'store:single-product' product.slug %}" title="{{ product.name }}">
                              <img src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'images/default.jpg' %}{% endif %}" 
                                   alt="{{ product.name }}" 
                                   class="tab-image" 
                                   style="width:204px;height:192px;object-fit:cover;">
                            </a>

                        </figure>
                        <h3>{{ product.name }}</h3>
                        <span class="qty">1 Unit</span>
                        <span class="rating">
                          <svg width="24" height="24" class="text-primary"><use xlink:href="#star-solid"></use></svg>
                          {{ product.rating }}
                        </span>
                      </div>
                    </div>
                  {% empty %}
                    <p>No trending products available.</p>
                  {% endfor %}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Best Selling Products -->
  <section class="py-5 overflow-hidden">
    <div class="container-fluid">
      <div class="section-header d-flex justify-content-between mb-5">
        <h2 class="section-title">Best Selling Products</h2>
        <div class="d-flex align-items-center">
          <a href="{% url 'store:shop' %}" class="btn-link text-decoration-none">View All Products →</a>
          <div class="swiper-buttons">
            <button class="swiper-prev products-carousel-prev btn btn-primary">❮</button>
            <button class="swiper-next products-carousel-next btn btn-primary">❯</button>
          </div>
        </div>
      </div>
      <div class="products-carousel swiper">
        <div class="swiper-wrapper">
          {% for product in best_selling_products %}
            <div class="product-item swiper-slide">
              {% if product.discount_price %}
                <span class="badge bg-success position-absolute m-3">-{{ product.discount_percentage }}%</span>
              {% endif %}
              <a href="{% url 'users:add_to_wishlist' product.id %}" class="btn-wishlist"><svg width="24" height="24"><use xlink:href="#heart"></use></svg></a>
              <figure>
<a href="{% url 'store:single-product' product.slug %}" title="{{ product.name }}">
  <img src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'images/default.jpg' %}{% endif %}" 
       alt="{{ product.name }}" 
       class="tab-image" 
       style="width:204px;height:192px;object-fit:cover;">
</a>

              </figure>
              <h3>{{ product.name }}</h3>
              <span class="qty">1 Unit</span>
              <span class="rating"><svg width="24" height="24" class="text-primary"><use xlink:href="#star-solid"></use></svg> {{ product.rating }}</span>
            </div>
          {% empty %}
            <p>No best-selling products available.</p>
          {% endfor %}
        </div>
      </div>
    </div>
  </section>

  <!-- Most Popular Products -->
  <section class="py-5 overflow-hidden">
    <div class="container-fluid">
      <div class="section-header d-flex justify-content-between my-5">
        <h2 class="section-title">Most Popular Products</h2>
        <div class="d-flex align-items-center">
          <a href="{% url 'store:shop' %}" class="btn-link text-decoration-none">View All Products →</a>
          <div class="swiper-buttons">
            <button class="swiper-prev products-carousel-prev btn btn-primary">❮</button>
            <button class="swiper-next products-carousel-next btn btn-primary">❯</button>
          </div>
        </div>
      </div>
      <div class="products-carousel swiper">
        <div class="swiper-wrapper">
          {% for product in most_popular_products %}
            <div class="product-item swiper-slide">
              {% if product.discount_price %}
                <span class="badge bg-success position-absolute m-3">-{{ product.discount_percentage }}%</span>
              {% endif %}
              <a href="{% url 'users:add_to_wishlist' product.id %}" class="btn-wishlist"><svg width="24" height="24"><use xlink:href="#heart"></use></svg></a>
              <figure>
<a href="{% url 'store:single-product' product.slug %}" title="{{ product.name }}">
  <img src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'images/default.jpg' %}{% endif %}" 
       alt="{{ product.name }}" 
       class="tab-image" 
       style="width:204px;height:192px;object-fit:cover;">
</a>

              </figure>
              <h3>{{ product.name }}</h3>
              <span class="qty">1 Unit</span>
              <span class="rating"><svg width="24" height="24" class="text-primary"><use xlink:href="#star-solid"></use></svg> {{ product.rating }}</span>
            </div>
          {% empty %}
            <p>No popular products available.</p>
          {% endfor %}
        </div>
      </div>
    </div>
  </section>

  <!-- Just Arrived Products -->
  <section class="py-5 overflow-hidden">
    <div class="container-fluid">
      <div class="section-header d-flex justify-content-between mb-5">
        <h2 class="section-title">Just Arrived</h2>
        <div class="d-flex align-items-center">
          <a href="{% url 'store:shop' %}" class="btn-link text-decoration-none">View All Products →</a>
          <div class="swiper-buttons">
            <button class="swiper-prev products-carousel-prev btn btn-primary">❮</button>
            <button class="swiper-next products-carousel-next btn btn-primary">❯</button>
          </div>
        </div>
      </div>
      <div class="products-carousel swiper">
        <div class="swiper-wrapper">
          {% for product in trending_products %}
            <div class="product-item swiper-slide">
              {% if product.discount_price %}
                <span class="badge bg-success position-absolute m-3">-{{ product.discount_percentage }}%</span>
              {% endif %}
              <a href="{% url 'users:add_to_wishlist' product.id %}" class="btn-wishlist"><svg width="24" height="24"><use xlink:href="#heart"></use></svg></a>
              <figure>
<a href="{% url 'store:single-product' product.slug %}" title="{{ product.name }}">
  <img src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'images/default.jpg' %}{% endif %}" 
       alt="{{ product.name }}" 
       class="tab-image" 
       style="width:204px;height:192px;object-fit:cover;">
</a>

              </figure>
              <h3>{{ product.name }}</h3>
              <span class="qty">1 Unit</span>
              <span class="rating"><svg width="24" height="24" class="text-primary"><use xlink:href="#star-solid"></use></svg> {{ product.rating }}</span>
            </div>
          {% empty %}
            <p>No just-arrived products available.</p>
          {% endfor %}
        </div>
      </div>
    </div>
  </section>

  <!-- People are also looking for -->
  <section class="py-5">
    <div class="container-fluid">
      <h2 class="my-5">People are also looking for</h2>
      {% for category in categories %}
        <a href="" class="btn btn-warning me-2 mb-2">{{ category.name }}</a>
      {% endfor %}
    </div>
  </section>

  <!-- Info Cards -->
  <section class="py-5">
    <div class="container-fluid">
      <div class="row row-cols-1 row-cols-sm-3 row-cols-lg-5">
        <!-- Free Delivery -->
        <div class="col">
          <div class="card mb-3 border-0">
            <div class="row">
              <div class="col-md-2 text-dark">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M21.5 15a3 3 0 0 0-1.9-2.78l1.87-7a1 1 0 0 0-.18-.87A1 1 0 0 0 20.5 4H6.8l-.33-1.26A1 1 0 0 0 5.5 2h-2v2h1.23l2.48 9.26a1 1 0 0 0 1 .74H18.5a1 1 0 0 1 0 2h-13a1 1 0 0 0 0 2h1.18a3 3 0 1 0 5.64 0h2.36a3 3 0 1 0 5.82 1a2.94 2.94 0 0 0-.4-1.47A3 3 0 0 0 21.5 15Zm-3.91-3H9L7.34 6H19.2ZM9.5 20a1 1 0 1 1 1-1a1 1 0 0 1-1 1Zm8 0a1 1 0 1 1 1-1a1 1 0 0 1-1 1Z"/></svg>
              </div>
              <div class="col-md-10">
                <div class="card-body p-0">
                  <h5>Free delivery</h5>
                  <p class="card-text">Enjoy fast, reliable delivery across Canada — at no extra cost for eligible orders.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Secure Payment -->
        <div class="col">
          <div class="card mb-3 border-0">
            <div class="row">
              <div class="col-md-2 text-dark">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M19.63 3.65a1 1 0 0 0-.84-.2a8 8 0 0 1-6.22-1.27a1 1 0 0 0-1.14 0a8 8 0 0 1-6.22 1.27a1 1 0 0 0-.84.2a1 1 0 0 0-.37.78v7.45a9 9 0 0 0 3.77 7.33l3.65 2.6a1 1 0 0 0 1.16 0l3.65-2.6A9 9 0 0 0 20 11.88V4.43a1 1 0 0 0-.37-.78ZM18 11.88a7 7 0 0 1-2.93 5.7L12 19.77l-3.07-2.19A7 7 0 0 1 6 11.88v-6.3a10 10 0 0 0 6-1.39a10 10 0 0 0 6 1.39Zm-4.46-2.29l-2.69 2.7l-.89-.9a1 1 0 0 0-1.42 1.42l1.6 1.6a1 1 0 0 0 1.42 0L15 11a1 1 0 0 0-1.42-1.42Z"/></svg>
              </div>
              <div class="col-md-10">
                <div class="card-body p-0">
                  <h5>100% secure payment</h5>
                  <p class="card-text">Your transactions are protected with advanced encryption and trusted payment gateways.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Quality Guarantee -->
        <div class="col">
          <div class="card mb-3 border-0">
            <div class="row">
              <div class="col-md-2 text-dark">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M22 5H2a1 1 0 0 0-1 1v4a3 3 0 0 0 2 2.82V22a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1v-9.18A3 3 0 0 0 23 10V6a1 1 0 0 0-1-1Zm-7 2h2v3a1 1 0 0 1-2 0Zm-4 0h2v3a1 1 0 0 1-2 0ZM7 7h2v3a1 1 0 0 1-2 0Zm-3 4a1 1 0 1 1 1-1V7h2v3a1 1 0 0 1-1 1Zm10 10h-4v-2a2 2 0 0 1 4 0Zm5 0h-3v-2a4 4 0 0 0-8 0v2H5v-8.18a3.17 3.17 0 0 0 1-.6a3 3 0 0 0 4 0a3 3 0 0 0 4 0a3 3 0 0 0 4 0a3.17 3.17 0 0 0 1 .6Zm2-11a1 1 0 0 1-2 0V7h2Zm4.3 3H20a1 1 0 0 0 0-2H4.3a1 1 0 0 0 0 2Z"/></svg>
              </div>
              <div class="col-md-10">
                <div class="card-body p-0">
                  <h5>Quality guarantee</h5>
                  <p class="card-text">We stand behind every product with strict quality control and trusted brands.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Guaranteed Savings -->
        <div class="col">
          <div class="card mb-3 border-0">
            <div class="row">
              <div class="col-md-2 text-dark">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M12 8.35a3.07 3.07 0 0 0-3.54.53a3 3 0 0 0 0 4.24L11.29 16a1 1 0 0 0 1.42 0l2.83-2.83a3 3 0 0 0 0-4.24A3.07 3.07 0 0 0 12 8.35Zm2.12 3.36L12 13.83l-2.12-2.12a1 1 0 0 1 0-1.42a1 1 0 0 1 1.41 0a1 1 0 0 0 1.42 0a1 1 0 0 1 1.41 0a1 1 0 0 1 0 1.42ZM12 2A10 10 0 0 0 2 12a9.89 9.89 0 0 0 2.26 6.33l-2 2a1 1 0 0 0-.21 1.09A1 1 0 0 0 3 22h9a10 10 0 0 0 0-20Zm0 18H5.41l.93-.93a1 1 0 0 0 0-1.41A8 8 0 1 1 12 20Z"/></svg>
              </div>
              <div class="col-md-10">
                <div class="card-body p-0">
                  <h5>guaranteed savings</h5>
                  <p class="card-text">Get competitive wholesale prices and exclusive deals for registered customers.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Daily Offers -->
        <div class="col">
          <div class="card mb-3 border-0">
            <div class="row">
              <div class="col-md-2 text-dark">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M18 7h-.35A3.45 3.45 0 0 0 18 5.5a3.49 3.49 0 0 0-6-2.44A3.49 3.49 0 0 0 6 5.5A3.45 3.45 0 0 0 6.35 7H6a3 3 0 0 0-3 3v2a1 1 0 0 0 1 1h1v6a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3v-6h1a1 1 0 0 0 1-1v-2a3 3 0 0 0-3-3Zm-7 13H8a1 1 0 0 1-1-1v-6h4Zm0-9H5v-1a1 1 0 0 1 1-1h5Zm0-4H9.5A1.5 1.5 0 1 1 11 5.5Zm2-1.5A1.5 1.5 0 1 1 14.5 7H13ZM17 19a1 1 0 0 1-1 1h-3v-7h4Zm2-8h-6V9h5a1 1 0 0 1 1 1Z"/></svg>
              </div>
              <div class="col-md-10">
                <div class="card-body p-0">
                  <h5>Daily offers</h5>
                  <p class="card-text">Discover new discounts every day — save more on essential supplies.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
{% endblock %}
